<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
		PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.slam.mapper.book.BookImageMapper">

	<insert id="save">
		INSERT INTO BOOK_IMAGE
		            (
		            BOOK_ID
		            , IMAGE
		            )
		     VALUES <foreach collection="images" item="i" separator=",">
		            (
		            <choose>
						<when test="id != null and id != 0">
							#{id}
						</when>
						<otherwise>
							LAST_INSERT_ID()
						</otherwise>
					</choose>
		            , #{i}
		            )
	                </foreach>
	</insert>

</mapper>
